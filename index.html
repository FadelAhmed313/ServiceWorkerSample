<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FCM Service Worker Example</title>
</head>
<body>
    <!-- Your HTML content here -->

    <!-- Include the Firebase SDK -->
 importScripts('https://www.gstatic.com/firebasejs/9.2.0/firebase-app-compat.js');
 importScripts('https://www.gstatic.com/firebasejs/9.2.0/firebase-messaging-compat.js');

    <!-- Initialize Firebase -->
    <script>
        firebase.initializeApp({
    apiKey: 'AIzaSyBp7MQkZHx00lpCthWsTd_0eO5Hc54bIso',
    authDomain: 'chanda-calculator-c702c.firebaseapp.com',
    projectId: 'chanda-calculator-c702c',
    storageBucket: 'chanda-calculator-c702c.appspot.com',
    messagingSenderId: '1086098697716',
    appId: '1086098697716'
        });

        // Retrieve an instance of Firebase Messaging
        const messaging = firebase.messaging();

        // Optional: Customize notification behavior
        messaging.setBackgroundMessageHandler((payload) => {
            const { title, body } = payload.notification;
            const options = {
                body,
                icon: '/path/to/your/icon.png'
            };
            return self.registration.showNotification(title, options);
        });

        // Handle incoming messages when app is in the foreground
        messaging.onMessage((payload) => {
            console.log('Message received:', payload);
            // Custom handling logic (e.g., display a notification)
        });

        // Handle clicks on notifications
        self.addEventListener('notificationclick', (event) => {
            const clickedNotification = event.notification;
            // Custom handling logic (e.g., open a specific page)
            clickedNotification.close();
        });

        // Handle token refresh
        messaging.onTokenRefresh(() => {
            messaging.getToken().then((refreshedToken) => {
                console.log('Refreshed FCM token:', refreshedToken);
                // Send the refreshed token to your server
            });
        });
    </script>
</body>
</html>
